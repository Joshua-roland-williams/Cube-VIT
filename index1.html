<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Cubing Club</title>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;800;900&family=Space+Grotesk:wght@300;400;500;600;700&family=Rajdhani:wght@300;400;500;600;700&family=Exo+2:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600&family=Audiowide&family=Michroma:wght@400&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      line-height: 1.6;
      color: #1a1a1a;
      overflow-x: hidden;
      font-weight: 400;
      letter-spacing: -0.01em;
    }

    /* Hero Section */
    .hero {
      position: relative;
      height: 100vh;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    /* Animated background pattern */
    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 50%, rgba(255, 0, 128, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(0, 255, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(255, 215, 0, 0.1) 0%, transparent 50%);
      animation: backgroundMove 20s ease-in-out infinite;
    }

    @keyframes backgroundMove {
      0%, 100% { transform: translateX(0) translateY(0); }
      25% { transform: translateX(2%) translateY(-1%); }
      50% { transform: translateX(-1%) translateY(2%); }
      75% { transform: translateX(1%) translateY(-2%); }
    }

    /* Hero Text */
    .hero-content {
      text-align: center;
      z-index: 10;
      color: white;
      text-shadow: 0 4px 20px rgba(0,0,0,0.4);
      max-width: 900px;
      padding: 0 2rem;
    }

    /* Scroll Indicator Dots */
.scroll-indicator {
  position: fixed;
  right: 30px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 1000;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.scroll-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  border: 2px solid transparent;
}

.scroll-dot:hover {
  background: rgba(255, 255, 255, 0.6);
  transform: scale(1.2);
}

.scroll-dot.active {
  background: white;
  box-shadow: 0 0 15px rgba(255, 255, 255, 0.6);
  transform: scale(1.3);
}

.scroll-dot.active::after {
  content: '';
  position: absolute;
  width: 20px;
  height: 20px;
  border: 2px solid white;
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%) scale(2);
    opacity: 0;
  }
}

.scroll-dot::before {
  content: attr(data-tooltip);
  position: absolute;
  right: 25px;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 5px 10px;
  border-radius: 5px;
  font-size: 12px;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.scroll-dot:hover::before {
  opacity: 1;
}

@media (max-width: 768px) {
  .scroll-indicator {
    right: 15px;
    gap: 12px;
  }
  
  .scroll-dot {
    width: 10px;
    height: 10px;
  }
}

    .cube-title {
      font-family: 'Orbitron', monospace;
      font-size: clamp(2.8rem, 8vw, 8rem);
      font-weight: 900;
      margin-bottom: 1.5rem;
      background: linear-gradient(135deg, #ff0080 0%, #7928ca 20%, #0070f3 40%, #00dfd8 60%, #ff4081 80%, #ffd700 100%);
      background-size: 600% 600%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientMove 5s ease-in-out infinite, glow 2s ease-in-out infinite alternate;
      letter-spacing: 0.05em;
      line-height: 1.1;
      text-transform: uppercase;
      filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.3));
    }

    .cube-subtitle {
      font-family: 'Audiowide', cursive;
      font-size: clamp(1.2rem, 3vw, 2.4rem);
      font-weight: 400;
      opacity: 0.95;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: #ffffff;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px rgba(0, 255, 255, 0.3);
      animation: neonPulse 3s ease-in-out infinite;
    }

    @keyframes gradientMove {
      0%, 100% { background-position: 0% 50%; }
      25% { background-position: 100% 0%; }
      50% { background-position: 100% 100%; }
      75% { background-position: 0% 100%; }
    }

    @keyframes glow {
      0% { filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.3)); }
      100% { filter: drop-shadow(0 0 40px rgba(255, 255, 255, 0.6)); }
    }

    @keyframes neonPulse {
      0%, 100% { 
        text-shadow: 0 0 5px rgba(255, 255, 255, 0.5), 0 0 10px rgba(0, 255, 255, 0.3);
        opacity: 0.95;
      }
      50% { 
        text-shadow: 0 0 15px rgba(255, 255, 255, 0.8), 0 0 25px rgba(0, 255, 255, 0.6);
        opacity: 1;
      }
    }

    /* Scroll down indicator */
    .scroll-indicator-hero {
      position: absolute;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
      color: white;
      text-align: center;
      opacity: 0.8;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
      40% { transform: translateX(-50%) translateY(-10px); }
      60% { transform: translateX(-50%) translateY(-5px); }
    }

    /* Sections */
    .section {
      position: relative;
      min-height: 100vh;
      padding: 4rem 2rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      opacity: 0;
      transform: translateY(50px);
      transition: all 0.8s ease-out;
    }

    .section.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .section h2 {
      font-family: 'Rajdhani', sans-serif;
      font-size: clamp(2.8rem, 5vw, 5.5rem);
      font-weight: 700;
      margin-bottom: 1rem;
      color: #1a1a1a;
      letter-spacing: 0.02em;
      line-height: 1.1;
      text-transform: uppercase;
      position: relative;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .section h2::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: linear-gradient(90deg, #ff0080, #7928ca, #0070f3);
      border-radius: 2px;
    }

    .section h3 {
      font-family: 'Exo 2', sans-serif;
      font-size: 1.4rem;
      font-weight: 500;
      color: #666;
      margin-bottom: 2rem;
      letter-spacing: 0.08em;
      text-transform: lowercase;
      font-style: italic;
      opacity: 0.8;
    }

    .section p {
      font-family: 'Space Grotesk', sans-serif;
      font-size: clamp(1.2rem, 2.5vw, 1.7rem);
      font-weight: 400;
      max-width: 800px;
      color: #444;
      line-height: 1.7;
      letter-spacing: -0.005em;
    }

    /* Vision Section */
    #vision {
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      cursor: pointer;
      transition: all 0.3s ease;
      border-radius: 0;
    }

    #vision:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }

    #vision h2 {
      color: #1e293b;
    }

    #vision h3 {
      color: #64748b;
    }

    #vision p {
      color: #475569;
    }

    /* Mission Section */
    #mission {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    #mission h2 {
      color: white;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
      background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    #mission h2::after {
      background: linear-gradient(90deg, #ffffff, #f0f9ff, #dbeafe);
    }

    #mission p {
      color: rgba(255,255,255,0.95);
      text-shadow: 0 1px 5px rgba(0,0,0,0.2);
    }

    /* Insights Section */
    #insights {
      background: linear-gradient(135deg, #fef3c7 0%, #f59e0b 100%);
      padding: 4rem 2rem;
    }

    .insights-container {
      width: 100%;
      max-width: 1200px;
    }

    .insights-title {
      font-family: 'Rajdhani', sans-serif;
      font-size: clamp(2.8rem, 5vw, 5.5rem);
      font-weight: 700;
      margin-bottom: 0.5rem;
      color: #1a1a1a;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 50%, #92400e 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .insights-subtitle {
      font-family: 'Exo 2', sans-serif;
      font-size: 1.4rem;
      font-weight: 500;
      color: #78716c;
      margin-bottom: 3rem;
      letter-spacing: 0.08em;
      text-transform: lowercase;
      font-style: italic;
      opacity: 0.8;
    }

    .insights-scroll-wrapper {
      position: relative;
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .insights-cards {
      display: flex;
      gap: 2rem;
      overflow-x: auto;
      scroll-behavior: smooth;
      padding: 1rem 0;
      flex: 1;
      scrollbar-width: thin;
      scrollbar-color: rgba(0,0,0,0.3) transparent;
    }

    .insights-cards::-webkit-scrollbar {
      height: 8px;
    }

    .insights-cards::-webkit-scrollbar-track {
      background: rgba(0,0,0,0.1);
      border-radius: 4px;
    }

    .insights-cards::-webkit-scrollbar-thumb {
      background: rgba(0,0,0,0.3);
      border-radius: 4px;
    }

    .insights-cards::-webkit-scrollbar-thumb:hover {
      background: rgba(0,0,0,0.5);
    }

    .insight-card {
      min-width: 320px;
      padding: 2.5rem;
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.08);
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.3rem;
      font-weight: 500;
      color: #1a1a1a;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      line-height: 1.6;
      letter-spacing: -0.01em;
      border: 1px solid rgba(0,0,0,0.05);
      position: relative;
      overflow: hidden;
    }

    .insight-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, #ff0080, #7928ca, #0070f3, #00dfd8);
      background-size: 200% 200%;
      animation: cardGradient 3s ease-in-out infinite;
    }

    @keyframes cardGradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .insight-card:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 25px 50px rgba(0,0,0,0.15);
    }

    .scroll-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
      transition: all 0.3s ease;
      flex-shrink: 0;
      color: white;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .scroll-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .scroll-btn:not(:disabled)::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s ease;
    }

    .scroll-btn:not(:disabled):hover::before {
      left: 100%;
    }

    .scroll-btn:not(:disabled):hover {
      transform: scale(1.1);
      box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.8);
      backdrop-filter: blur(8px);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .modal.show {
      opacity: 1;
    }

    .modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.8);
      max-width: 90%;
      max-height: 90%;
      border-radius: 15px;
      transition: transform 0.3s ease;
      background: white;
      padding: 2rem;
      box-shadow: 0 25px 50px rgba(0,0,0,0.5);
    }

    .modal.show .modal-content {
      transform: translate(-50%, -50%) scale(1);
    }

    .modal-content img {
      width: 100%;
      height: auto;
      border-radius: 10px;
    }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 20px;
      color: #666;
      font-size: 30px;
      font-weight: 700;
      cursor: pointer;
      z-index: 1001;
      transition: all 0.3s ease;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
    }

    /* Hide scrollbar for all browsers */
html {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
}

html::-webkit-scrollbar {
  display: none; /* Safari and Chrome */
}

body {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
}

body::-webkit-scrollbar {
  display: none; /* Safari and Chrome */
}

/* Also hide scrollbar for the insights container */
.insights-cards {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
}

.insights-cards::-webkit-scrollbar {
  display: none; /* Safari and Chrome */
}

    .close-btn:hover {
      color: #ff0080;
      transform: rotate(90deg);
      background: rgba(255,255,255,0.2);
    }

    /* Footer */
    .footer {
      background: #111827;
      color: white;
      padding: 4rem 2rem;
      text-align: center;
    }

    .footer-content h2 {
      font-family: 'Rajdhani', sans-serif;
      margin-bottom: 2rem;
      font-size: 2.5rem;
      font-weight: 700;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      background: linear-gradient(135deg, #4ecdc4 0%, #45b7d1 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .footer-content p {
      font-family: 'Space Grotesk', sans-serif;
      margin-bottom: 1rem;
      font-size: 1.1rem;
      font-weight: 400;
      color: #d1d5db;
      letter-spacing: -0.005em;
    }

    .footer-content a {
      color: #4ecdc4;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
    }

    .footer-content a:hover {
      color: #45b7d1;
    }

    /* Loading indicator */
    .loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #111827;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 1;
      transition: opacity 0.5s ease;
    }

    .loading.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(255,255,255,0.1);
      border-top: 4px solid #4ecdc4;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Error state */
    .error-message {
      background: #fee2e2;
      color: #dc2626;
      padding: 1rem;
      border-radius: 8px;
      margin: 1rem 0;
      text-align: center;
      display: none;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .insights-scroll-wrapper {
        flex-direction: column;
        gap: 1rem;
      }
      
      .scroll-btn {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
      }
      
      .insight-card {
        min-width: 280px;
        padding: 2rem;
        font-size: 1.1rem;
      }

      .cube-title {
        font-size: clamp(2.2rem, 10vw, 5rem);
      }

      .cube-subtitle {
        font-size: clamp(1rem, 4vw, 1.8rem);
      }

      .section {
        padding: 3rem 1.5rem;
      }
    }

    @media (max-width: 480px) {
      .insight-card {
        min-width: 260px;
        padding: 1.8rem;
      }

      .hero-content {
        padding: 0 1rem;
      }
    }

    /* Accessibility improvements */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* Focus styles */
    .scroll-btn:focus,
    .close-btn:focus,
    #vision:focus {
      outline: 2px solid #4ecdc4;
      outline-offset: 2px;
    }
  </style>
</head>
<body>
  <!-- Loading screen -->
  <div class="loading" id="loadingScreen">
    <div class="loading-spinner"></div>
  </div>

  <!-- Scroll Indicator Dots -->
<div class="scroll-indicator">
  <div class="scroll-dot active" data-tooltip="Home" data-section="hero"></div>
  <div class="scroll-dot" data-tooltip="Vision" data-section="vision"></div>
  <div class="scroll-dot" data-tooltip="Mission" data-section="mission"></div>
  <div class="scroll-dot" data-tooltip="Insights" data-section="insights"></div>
  <div class="scroll-dot" data-tooltip="Contact" data-section="footer"></div>
</div>

  <!-- Hero Section -->
  <section class="hero" id="hero">
    <div class="hero-content">
      <h1 class="cube-title">Welcome to<br>CUBE VIT</h1>
      <div class="cube-subtitle">Just CUBE it Macha!!</div>
    </div>
    <div class="scroll-indicator-hero">
      <div style="font-size: 2rem; margin-bottom: 0.5rem;">↓</div>
      <div style="font-size: 0.9rem; opacity: 0.8;">Scroll to explore</div>
    </div>
  </section>

  <!-- Vision Section -->
  <section class="section" id="vision" role="button" tabindex="0" aria-label="Click to learn more about our vision">
    <h2>Our Vision</h2>
    <h3>click to know more</h3>
    <p>To revolutionize cubing through technology and community, creating a space where passion meets innovation and every cube enthusiast can thrive.</p>
  </section>

  <!-- Modal for Vision -->
  <div id="visionModal" class="modal" role="dialog" aria-labelledby="visionModalTitle" aria-hidden="true">
    <div class="modal-content">
      <button class="close-btn" id="closeModal" aria-label="Close modal">&times;</button>
      <h3 id="visionModalTitle" style="margin-bottom: 1rem; color: #1a1a1a;">Our Vision in Detail</h3>
      <p style="color: #666; line-height: 1.6; margin-bottom: 1.5rem;">
        At CUBE VIT, we envision a future where cubing transcends traditional boundaries. Our mission is to create an inclusive environment where beginners and world-class speedcubers can learn, compete, and grow together.
      </p>
      <p style="color: #666; line-height: 1.6;">
        We believe in the power of community, the thrill of competition, and the joy of solving complex puzzles. Through workshops, competitions, and collaborative learning, we're building the next generation of cubing enthusiasts.
      </p>
    </div>
  </div>

  <!-- Mission Section -->
  <section class="section" id="mission">
    <h2>Our Mission</h2>
    <p>To create a comprehensive platform for cubers to learn, grow, and compete while fostering a community of passionate puzzle solvers who support each other's journey from beginner to expert.</p>
  </section>

  <!-- Insights Section -->
  <section class="section" id="insights">
    <div class="insights-container">
      <h2 class="insights-title">Member Insights</h2>
      <p class="insights-subtitle">what our community says</p>

      <div class="insights-scroll-wrapper">
        <button class="scroll-btn left" id="scrollLeft" onclick="scrollInsights(-1)" aria-label="Scroll left">‹</button>

        <div class="insights-cards" id="insightsCards">
          <div class="insight-card">"I used to be gay...... I still am (YAY!)" – Josh</div>
          <div class="insight-card">"Amazing community! The workshops are incredibly helpful and everyone is so supportive. Highly recommend joining!" – Priya</div>
          <div class="insight-card">"Found my passion for speedcubing here. The advanced techniques workshop was a game-changer for my times." – Rishi</div>
          <div class="insight-card">"Love the friendly atmosphere! Whether you're a beginner or expert, everyone helps each other improve." – Zara</div>
          <div class="insight-card">"The competitions are well-organized and the community events are so much fun. Great place to make friends!" – Alex</div>
          <div class="insight-card">"Learned so much about different cube variants here. The club has resources for every type of puzzle!" – Maya</div>
        </div>

        <button class="scroll-btn right" id="scrollRight" onclick="scrollInsights(1)" aria-label="Scroll right">›</button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <h2>Get In Touch</h2>
      <p>LinkedIn: <a href="https://www.linkedin.com/company/the-cubing-club-vit-vellore" target="_blank" rel="noopener noreferrer">The Cubing Club VIT</a></p>
      <p>Instagram: <a href="https://instagram.com/cube_vit" target="_blank" rel="noopener noreferrer">@cube_vit</a></p>
      <p>Email: <a href="mailto:cubevit@gmail.com">cubevit@gmail.com</a></p>
      <p>Location: VIT Vellore, Tamil Nadu, India</p>
      <p style="margin-top: 2rem; opacity: 0.6; font-size: 0.9rem;">© 2024 CUBE VIT. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Loading screen
    window.addEventListener('load', () => {
      const loadingScreen = document.getElementById('loadingScreen');
      setTimeout(() => {
        loadingScreen.classList.add('hidden');
      }, 500);
    });

    // Scroll animations with Intersection Observer
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    // Scroll indicator dots functionality
const scrollDots = document.querySelectorAll('.scroll-dot');
const sections = document.querySelectorAll('section, footer');

// Update active dot based on scroll position
function updateActiveDot() {
  const scrollY = window.scrollY;
  const windowHeight = window.innerHeight;
  
  sections.forEach((section, index) => {
    const sectionTop = section.offsetTop;
    const sectionHeight = section.offsetHeight;
    
    if (scrollY >= sectionTop - windowHeight / 2 && 
        scrollY < sectionTop + sectionHeight - windowHeight / 2) {
      scrollDots.forEach(dot => dot.classList.remove('active'));
      if (scrollDots[index]) {
        scrollDots[index].classList.add('active');
      }
    }
  });
}

// Click functionality for dots
scrollDots.forEach((dot, index) => {
  dot.addEventListener('click', () => {
    const targetSection = sections[index];
    if (targetSection) {
      targetSection.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }
  });
});

// Update dots on scroll
window.addEventListener('scroll', updateActiveDot);
window.addEventListener('load', updateActiveDot);

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, observerOptions);

    // Observe all sections
    document.querySelectorAll('.section').forEach(section => {
      observer.observe(section);
    });

    // Vision modal functionality
    const visionSection = document.getElementById('vision');
    const visionModal = document.getElementById('visionModal');
    const closeModal = document.getElementById('closeModal');

    function openModal() {
      visionModal.style.display = 'block';
      visionModal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
      
      // Add show class for animation
      setTimeout(() => {
        visionModal.classList.add('show');
      }, 10);
      
      // Focus the close button for accessibility
      closeModal.focus();
    }

    function closeModalFunction() {
      visionModal.classList.remove('show');
      setTimeout(() => {
        visionModal.style.display = 'none';
        visionModal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = 'auto';
        visionSection.focus(); // Return focus to the trigger element
      }, 300);
    }

    // Event listeners for modal
    visionSection.addEventListener('click', openModal);
    visionSection.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        openModal();
      }
    });

    closeModal.addEventListener('click', closeModalFunction);
    visionModal.addEventListener('click', (e) => {
      if (e.target === visionModal) closeModalFunction();
    });

    // Keyboard navigation for modal
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && visionModal.style.display === 'block') {
        closeModalFunction();
      }
    });

    // Insights scrolling with improved logic
    const cardWidth = 340; // card width + gap

    function updateScrollButtons() {
      const container = document.getElementById('insightsCards');
      const scrollLeft = document.getElementById('scrollLeft');
      const scrollRight = document.getElementById('scrollRight');
      
      const maxScroll = container.scrollWidth - container.clientWidth;
      
      scrollLeft.disabled = container.scrollLeft <= 0;
      scrollRight.disabled = container.scrollLeft >= maxScroll - 10; // Small buffer
    }
function scrollInsights(direction) {
      const container = document.getElementById('insightsCards');
      const targetScroll = container.scrollLeft + (direction * cardWidth);
      container.scrollTo({ left: targetScroll, behavior: 'smooth' });
      setTimeout(updateScrollButtons, 300);
    }

    // Add scroll event listener to insights container
    document.getElementById('insightsCards').addEventListener('scroll', updateScrollButtons);

    // Initialize scroll buttons on page load
    window.addEventListener('load', updateScrollButtons);
    window.addEventListener('resize', updateScrollButtons);

    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // Add keyboard navigation for insights
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft' && document.activeElement.closest('.insights-container')) {
        scrollInsights(-1);
      } else if (e.key === 'ArrowRight' && document.activeElement.closest('.insights-container')) {
        scrollInsights(1);
      }
    });

    // Auto-scroll insights every 5 seconds
    let autoScrollInterval = setInterval(() => {
      const container = document.getElementById('insightsCards');
      const maxScroll = container.scrollWidth - container.clientWidth;
      
      if (container.scrollLeft >= maxScroll - 10) {
        container.scrollTo({ left: 0, behavior: 'smooth' });
      } else {
        scrollInsights(1);
      }
    }, 5000);

    // Pause auto-scroll when user interacts
    document.querySelector('.insights-container').addEventListener('mouseenter', () => {
      clearInterval(autoScrollInterval);
    });

    document.querySelector('.insights-container').addEventListener('mouseleave', () => {
      autoScrollInterval = setInterval(() => {
        const container = document.getElementById('insightsCards');
        const maxScroll = container.scrollWidth - container.clientWidth;
        
        if (container.scrollLeft >= maxScroll - 10) {
          container.scrollTo({ left: 0, behavior: 'smooth' });
        } else {
          scrollInsights(1);
        }
      }, 5000);
    });

    // Add touch support for mobile
    let startX = 0;
    let scrollLeftStart = 0;

    document.getElementById('insightsCards').addEventListener('touchstart', (e) => {
      startX = e.touches[0].clientX;
      scrollLeftStart = e.target.scrollLeft;
    });

    document.getElementById('insightsCards').addEventListener('touchmove', (e) => {
      e.preventDefault();
      const currentX = e.touches[0].clientX;
      const diff = startX - currentX;
      e.target.scrollLeft = scrollLeftStart + diff;
    });

    document.getElementById('insightsCards').addEventListener('touchend', () => {
      updateScrollButtons();
    });

    // Add animation to scroll buttons
    document.querySelectorAll('.scroll-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        this.style.transform = 'scale(0.95)';
        setTimeout(() => {
          this.style.transform = 'scale(1)';
        }, 150);
      });
    });

    // Add focus management for accessibility
    document.querySelectorAll('.insight-card').forEach(card => {
      card.setAttribute('tabindex', '0');
      card.addEventListener('focus', () => {
        card.scrollIntoView({
          behavior: 'smooth',
          block: 'nearest',
          inline: 'center'
        });
      });
    });

    // Performance optimization: throttle scroll events
    function throttle(func, limit) {
      let inThrottle;
      return function() {
        const args = arguments;
        const context = this;
        if (!inThrottle) {
          func.apply(context, args);
          inThrottle = true;
          setTimeout(() => inThrottle = false, limit);
        }
      }
    }

    const throttledUpdateScrollButtons = throttle(updateScrollButtons, 100);
    document.getElementById('insightsCards').addEventListener('scroll', throttledUpdateScrollButtons);

    // Add error handling for scroll operations
    function safeScrollInsights(direction) {
      try {
        const container = document.getElementById('insightsCards');
        if (!container) {
          console.error('Insights container not found');
          return;
        }
        
        const targetScroll = container.scrollLeft + (direction * cardWidth);
        container.scrollTo({ left: targetScroll, behavior: 'smooth' });
        setTimeout(() => {
          try {
            updateScrollButtons();
          } catch (error) {
            console.error('Error updating scroll buttons:', error);
          }
        }, 300);
      } catch (error) {
        console.error('Error in scroll function:', error);
      }
    }

    // Replace the original scrollInsights function with the safe version
    window.scrollInsights = safeScrollInsights;

    // Initialize all functionality when DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      // Check if all required elements exist
      const requiredElements = ['insightsCards', 'scrollLeft', 'scrollRight', 'loadingScreen'];
      const missingElements = requiredElements.filter(id => !document.getElementById(id));
      
      if (missingElements.length > 0) {
        console.warn('Missing elements:', missingElements);
      }

      // Initialize insights carousel
      updateScrollButtons();
      
      // Add resize observer for responsive behavior
      if (window.ResizeObserver) {
        const resizeObserver = new ResizeObserver(() => {
          updateScrollButtons();
        });
        
        const insightsContainer = document.getElementById('insightsCards');
        if (insightsContainer) {
          resizeObserver.observe(insightsContainer);
        }
      }
    });

    // Add page visibility API to pause animations when tab is not active
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        clearInterval(autoScrollInterval);
      } else {
        // Restart auto-scroll when page becomes visible again
        autoScrollInterval = setInterval(() => {
          const container = document.getElementById('insightsCards');
          if (container) {
            const maxScroll = container.scrollWidth - container.clientWidth;
            
            if (container.scrollLeft >= maxScroll - 10) {
              container.scrollTo({ left: 0, behavior: 'smooth' });
            } else {
              scrollInsights(1);
            }
          }
        }, 5000);
      }
    });

    // Add preload functionality for smooth experience
    function preloadImages() {
      const images = document.querySelectorAll('img[data-src]');
      const imageObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            img.classList.remove('lazy');
            imageObserver.unobserve(img);
          }
        });
      });

      images.forEach(img => imageObserver.observe(img));
    }

    // Call preload on page load
    window.addEventListener('load', preloadImages);

    // Add cleanup function for memory management
    window.addEventListener('beforeunload', () => {
      clearInterval(autoScrollInterval);
    });
  </script>
</body>
</html>